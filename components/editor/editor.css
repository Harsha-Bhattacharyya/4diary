/**
 * Copyright Â© 2025 Harsha Bhattacharyya
 * 
 * This file is part of 4diary.
 * 
 * SPDX-License-Identifier: BSD-3-Clause
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the conditions in the LICENSE file are met.
 */

/* Custom styles for BlockNote Editor */

/* Light mode defaults (for :root and .light class) */
:root {
  --editor-text-color: #000000;
  --editor-hover-bg: rgba(0, 0, 0, 0.1);
  --editor-selected-bg: rgba(0, 0, 0, 0.15);
}

/* Dark mode overrides */
.dark {
  --editor-text-color: #FFFFFF;
  --editor-hover-bg: rgba(255, 255, 255, 0.1);
  --editor-selected-bg: rgba(255, 255, 255, 0.15);
}

/* Make BlockNote editor backgrounds transparent/inherit from parent container */
.bn-editor,
.bn-container,
.ProseMirror {
  background-color: transparent !important;
  background: transparent !important;
}

/* Ensure the main BlockNote view inherits background */
.bn-block-outer,
.bn-block-content {
  background-color: transparent !important;
  background: transparent !important;
}

/* Make formatting toolbar text black for better visibility */
.bn-formatting-toolbar button,
.bn-formatting-toolbar select,
.bn-formatting-toolbar .bn-button,
.bn-formatting-toolbar .bn-select {
  color: var(--editor-text-color) !important;
}

/* Make slash menu (suggestion menu) text black */
.bn-suggestion-menu .bn-suggestion-menu-item,
.bn-suggestion-menu-item {
  color: var(--editor-text-color) !important;
}

/* Ensure dropdown menus also have black text */
.bn-formatting-toolbar .bn-select-menu-item,
.bn-select-menu-item {
  color: var(--editor-text-color) !important;
}

/* Make sure icons and labels in toolbar are black */
.bn-formatting-toolbar svg,
.bn-formatting-toolbar path {
  stroke: var(--editor-text-color) !important;
  fill: var(--editor-text-color) !important;
}

/* Ensure hover states maintain visibility */
.bn-formatting-toolbar button:hover,
.bn-formatting-toolbar .bn-button:hover {
  color: var(--editor-text-color) !important;
  background-color: var(--editor-hover-bg);
}

/* Make suggestion menu items more visible */
.bn-suggestion-menu-item:hover {
  background-color: var(--editor-hover-bg);
}

.bn-suggestion-menu-item-selected {
  background-color: var(--editor-selected-bg);
}

/* Line numbers support */
.editor-with-line-numbers .bn-block-outer {
  display: flex;
  align-items: flex-start;
}

.editor-with-line-numbers {
  counter-reset: line-number;
}

.editor-with-line-numbers .bn-block-outer::before {
  content: counter(line-number);
  display: inline-block;
  width: 3rem;
  padding-right: 1rem;
  text-align: right;
  color: #999;
  font-size: 0.875rem;
  font-family: monospace;
  flex-shrink: 0;
  user-select: none;
  counter-increment: line-number;
}

/* Font styles for editor content - inherit from global .editor-font-* classes */
.editor-font-normal .bn-editor,
.editor-font-normal .bn-block-content,
.editor-font-normal .bn-inline-content,
.editor-font-normal [data-content-type],
.editor-font-serif .bn-editor,
.editor-font-serif .bn-block-content,
.editor-font-serif .bn-inline-content,
.editor-font-serif [data-content-type],
.editor-font-condensed .bn-editor,
.editor-font-condensed .bn-block-content,
.editor-font-condensed .bn-inline-content,
.editor-font-condensed [data-content-type] {
  font-family: inherit;
}

/* Math rendering styles */
.math-renderer {
  font-size: 1em;
  line-height: 1.5;
}

.math-renderer.block {
  text-align: center;
  padding: 1em 0;
  overflow-x: auto;
}

.math-renderer.inline {
  vertical-align: middle;
  padding: 0 0.2em;
}

/* Style for code blocks with syntax highlighting */
.bn-code-block {
  background-color: #f5f5f5;
  border-radius: 6px;
  padding: 1em;
  overflow-x: auto;
}

.bn-code-block code {
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.9em;
}

/* Enhanced syntax highlighting for code blocks */
.hljs {
  background: #f6f8fa;
  border-radius: 6px;
  padding: 1em;
}

.hljs-comment,
.hljs-quote {
  color: #6a737d;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #d73a49;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable {
  color: #005cc5;
}

.hljs-string,
.hljs-doctag {
  color: #032f62;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #6f42c1;
  font-weight: bold;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #6f42c1;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #22863a;
  font-weight: bold;
}

.hljs-regexp,
.hljs-link {
  color: #032f62;
}

.hljs-symbol,
.hljs-bullet {
  color: #005cc5;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #005cc5;
}

.hljs-meta {
  color: #005cc5;
}

.hljs-deletion {
  background-color: #ffeef0;
}

.hljs-addition {
  background-color: #e6ffed;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
